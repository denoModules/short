const emojistring2arr = (str: string): string[] => {
    const arr: string[] = [];
    let i = 0;
    for (i = 0; i < str.length / 2; i++) {
        const s = str[i * 2] + str[i * 2 + 1];
        arr.push(s);
    }
    return arr;
}
const getChars = (type: Type): string[] => {
    if (type == Type.emoji) {
        const str = 'ðŸ™ˆðŸ™‰ðŸ™ŠðŸµðŸ’ðŸ¶ðŸ•ðŸ©ðŸºðŸ±ðŸ˜ºðŸ˜¸ðŸ˜¹ðŸ˜»ðŸ˜¼ðŸ˜½ðŸ™€ðŸ˜¿ðŸ˜¾ðŸˆðŸ¯ðŸ…ðŸ†ðŸ´ðŸŽðŸ®ðŸ‚ðŸƒðŸ„ðŸ·ðŸ–ðŸ—ðŸ½ðŸðŸ‘ðŸðŸªðŸ«ðŸ˜ðŸ­ðŸðŸ€ðŸ¹ðŸ°ðŸ‡ðŸ»ðŸ¨ðŸ¼ðŸ¾ðŸ”ðŸ“ðŸ¦†ðŸ¦¢ðŸ¦œðŸ¦‰ðŸ£ðŸ¤ðŸ¥ðŸ¦ðŸ§ðŸ¸ðŸŠðŸ¢ðŸðŸ²ðŸ‰ðŸ³ðŸ‹ðŸ¬ðŸŸðŸ ðŸ¡ðŸ™ðŸšðŸŒðŸ›ðŸœðŸðŸžðŸ¦‹ðŸ’ðŸŒ¸ðŸ’®ðŸŒ¹ðŸŒºðŸŒ»ðŸŒ¼ðŸŒ·ðŸŒ±ðŸŒ²ðŸŒ³ðŸŒ´ðŸŒµðŸŒ¾ðŸŒ¿ðŸ€ðŸðŸ‚ðŸƒðŸ‡ðŸˆðŸ‰ðŸŠðŸ‹ðŸŒðŸðŸŽðŸðŸðŸ‘ðŸ’ðŸ“ðŸ…ðŸ†ðŸŒ½ðŸ„';
        return emojistring2arr(str);
    } else if (type == Type.chinese) {
        return "åŒ•åˆä¸æ­¹æˆˆå¤­ä»‘è®¥å†—é‚“è‰¾å¤¯å‡¸å¢å­å½çš¿å‡¹å›šçŸ¢ä¹å°”å†¯çŽ„é‚¦è¿‚é‚¢èŠ‹èŠåå¤·åå•å†å±¹å»·è¿„è‡¼ä»²ä¼¦ä¼Šè‚‹æ—­åŒˆå‡«å¦†äº¥æ±›è®³è®¶è®¹è®¼è¯€å¼›é˜±é©®é©¯çº«çŽ–çŽ›éŸ§æŠ æ‰¼æ±žæ‰³æŠ¡åŽåžæŠ‘æ‹ŸæŠ’èŠ™èŠœè‹‡èŠ¥èŠ¯èŠ­æ–æ‰å·«æˆç”«åŒ£è½©å¤è‚–å±å å‘•å‘åŸå‘›å»å­é‚‘å›¤å®å²–ç‰¡ä½‘ä½ƒä¼ºå›±è‚›è‚˜ç”¸ç‹ˆé¸ å½¤ç¸åˆ¨åº‡ååºé—°å…‘ç¼æ²æ²›æ±°æ²¥æ²¦æ±¹æ²§æ²ªå¿±è¯…è¯ˆç½•å±å å¦“å§Šå¦’çº¬çŽ«å¦å·å¯æ‹“åªå¤æ‹„æ‹§æ‹‚æ‹™æ‹‡æ‹—èŒ‰æ˜”è‹›è‹«è‹Ÿè‹žèŒè‹”æž‰æž¢æžšæž«æ­éƒçŸ¾å¥ˆå¥„æ®´æ­§å“æ˜™å“Žå’•å‘µå’™å‘»å’’å’†å’–å¸•è´¦è´¬è´®æ°›ç§‰å²³ä¾ ä¾¥ä¾£ä¾ˆå‘åˆ½åˆ¹è‚´è§…å¿¿ç“®è‚®è‚ªç‹žåºžç–Ÿç–™ç–šå’æ°“ç‚¬æ²½æ²®æ³£æ³žæ³Œæ²¼æ€”æ€¯å® å®›è¡©ç¥ˆè¯¡å¸šå±‰å¼§å¼¥é™‹é™Œå‡½å§†è™±åç»…é©¹ç»Šç»Žå¥‘è´°çŽ·çŽ²çŠæ‹­æ‹·æ‹±æŒŸåž¢åž›æ‹¯è†èŒ¸èŒ¬èšèŒµèŒ´èžè è¤è§è”æ ˆæŸ‘æ …æŸ æž·å‹ƒæŸ¬ç ‚æ³µç šé¸¥è½´éŸ­è™æ˜§ç›¹å’§æ˜µæ˜­ç›…å‹‹å“†å’ªå“Ÿå¹½é’™é’é’ é’¦é’§é’®æ¯¡æ°¢ç§•ä¿ä¿„ä¿ä¾¯å¾Šè¡èƒšèƒ§èƒŽç‹°é¥µå³¦å¥•å’¨é£’é—ºé—½ç±½å¨„çƒç‚«æ´¼æŸ’æ¶Žæ´›æƒææ¬æ¤å®¦è¯«è¯¬ç¥ è¯²å±å±Žé€Šé™¨å§šå¨œèš¤éª‡è€˜è€™ç§¦åŒ¿åŸ‚æ‚æè¢æŒæŒ«æŒšæ£æ…åŸƒè€¿è‚è¸èŽ½èŽ±èŽ‰èŽ¹èŽºæ¢†æ –æ¡¦æ “æ¡…æ¡©è´¾é…Œç ¸ç °ç ¾æ®‰é€žå“®å” å“ºå‰”èšŒèšœç•”èš£èšªèš“å“©åœƒé¸¯å”å“¼å”†å³­å”§å³»èµ‚èµƒé’¾é“†æ°¨ç§«ç¬†ä¿ºèµå€”æ®·è€¸èˆ€è±ºè±¹é¢èƒ¯èƒ°è„è„“é€›å¿é¸µé¸³é¦å‡Œå‡„è¡·éƒ­æ–‹ç–¹ç´Šç“·ç¾”çƒ™æµ¦æ¶¡æ¶£æ¶¤æ¶§æ¶•æ¶©æ‚æ‚¯çªè¯ºè¯½è¢’è°†ç¥Ÿæ•å¨©éªçéº¸ç‰ç…æŽªæºæ¶èµ¦åŸ æ»æŽæŽ‚æŽ–æŽ·æŽ¸æŽºå‹˜èŠå¨¶è±è²èŽè©è¤ä¹¾è§è¨è‡å½¬æ¢—æ¢§æ¢­æ›¹é…é…—åŽ¢ç¡…ç¡•å¥¢ç›”åŒ¾é¢…å½ªçœ¶æ™¤æ›¼æ™¦å†•å•¡ç•¦è¶¾å•ƒè›†èš¯è›‰è›€å”¬å•°å”¾å•¤å•¥å•¸å´Žé€»å´”å´©å©´èµŠé“é“›é“é“¡é“£é“­çŸ«ç§¸ç§½ç¬™ç¬¤åŽå‚€èº¯å…œè¡…å¾˜å¾™èˆ¶èˆ·èˆµæ•›ç¿Žè„¯é€¸å‡°çŒ–ç¥­çƒ¹åº¶åºµç—Šé˜Žé˜çœ·ç„Šç„•é¸¿æ¶¯æ·‘æ·Œæ·®æ·†æ¸Šæ·«æ·³æ·¤æ·€æ¶®æ¶µæƒ¦æ‚´æƒ‹å¯‚çª’è°è°è£†è¢±ç¥·è°’è°“è°šå°‰å •éš…å©‰é¢‡ç»°ç»·ç»¼ç»½ç¼€å·¢ç³ç¢ç¼æå °æ©æ½æ–å½­æ£æ€æ“å£¹æ”è‘«å‹Ÿè’‹è’‚éŸ©æ£±æ¤°ç„šæ¤Žæ£ºæ¦”æ¤­ç²Ÿæ£˜é…£é…¥ç¡ç¡«é¢Šé›³ç¿˜å‡¿æ£ æ™°é¼Žå–³éæ™¾ç•´è·‹è·›è›”èœ’è›¤é¹ƒå–»å•¼å–§åµŒèµ‹èµŽèµé”‰é”Œç”¥æŽ°æ°®æ°¯é»ç­ç‰ç²¤é€¾è…Œè…‹è…•çŒ©çŒ¬æƒ«æ•¦ç—˜ç—¢ç—ªç«£ç¿”å¥ é‚ç„™æ»žæ¹˜æ¸¤æ¸ºæºƒæº…æ¹ƒæ„•æƒ¶å¯“çª–çª˜é›‡è°¤çŠ€éš˜åª’åªšå©¿ç¼…ç¼†ç¼”ç¼•éªšç‘Ÿé¹‰ç‘°æªè˜æ–Ÿé´é¶è“–è’¿è’²è“‰æ¥”æ¤¿æ¥·æ¦„æ¥žæ¥£é…ªç¢˜ç¡¼ç¢‰è¾è¾‘é¢‘ç¹ç¦çž„å—œå—¦æš‡ç•¸è··è·ºèœˆèœ—èœ•è›¹å—…å—¡å—¤ç½²èœ€å¹Œé”šé”¥é”¨é”­é”°ç¨šé¢“ç­·é­è¡™è…»è…®è…ºé¹è‚„çŒ¿é¢–ç…žé›é¦é¦ç¦€ç—¹å»“ç—´é–èªŠæ¼“æº¢æº¯æº¶æ»“æººå¯žçª¥çªŸå¯è¤‚è£¸è°¬åª³å«‰ç¼šç¼¤å‰¿èµ˜ç†¬èµ«è”«æ‘¹è”“è”—è”¼ç†™è”šå…¢æ¦›æ¦•é…µç¢Ÿç¢´ç¢±ç¢³è¾•è¾–é›Œå¢…å˜è¸Šè‰å˜€å¹”é•€èˆ”ç†ç®ç®•ç®«èˆ†åƒ§å­µç˜©ç˜Ÿå½°ç²¹æ¼±æ¼©æ¼¾æ…·å¯¡å¯¥è°­è¤è¤ªéš§å«¡ç¼¨æ’µæ’©æ’®æ’¬æ“’å¢©æ’°éžè•Šè•´æ¨Šæ¨Ÿæ©„æ•·è±Œé†‡ç£•ç£…ç¢¾æ†‹å˜¶å˜²å˜¹è èŽèŒè—è™å˜¿å¹¢é•Šé•ç¨½ç¯“è†˜é²¤é²«è¤’ç˜ªç˜¤ç˜«å‡›æ¾Žæ½­æ½¦æ¾³æ½˜æ¾ˆæ¾œæ¾„æ†”æ‡Šæ†Žç¿©è¤¥è°´é¹¤æ†¨å±¥å¬‰è±«ç¼­æ’¼æ“‚æ“…è•¾è–›è–‡æ“Žç¿°å™©æ©±æ©™ç“¢èŸ¥éœéœŽè¾™å†€è¸±è¹‚èŸ†èžƒèžŸå™ªé¹¦é»”ç©†ç¯¡ç¯·ç¯™ç¯±å„’è†³é²¸ç˜¾ç˜¸ç³™ç‡Žæ¿’æ†¾æ‡ˆçª¿ç¼°å£•è—æª¬æªæª©æª€ç¤ç£·çž­çž¬çž³çžªæ›™è¹‹èŸ‹èŸ€åšŽèµ¡é•£é­ç°‡å„¡å¾½çˆµæœ¦è‡Šé³„ç³œç™Œæ‡¦è±è‡€è—•è—¤çž»åš£é³ç™žç€‘è¥Ÿç’§æˆ³æ”’å­½è˜‘è—»é³–è¹­è¹¬ç°¸ç°¿èŸ¹é¡ç™£ç¾¹é¬“æ”˜è •å·é³žç³¯è­¬éœ¹èºé«“è˜¸é•¶ç“¤çŸ—".split('');
    } else {
        return '0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'.split('');
    }
}
export enum Type {
    default,
    chinese,
    emoji
}
export const encode = (number: number, type: Type): string => {
    const chars = getChars(type);
    const radix: number = chars.length;
    const arr: string[] = [];
    let n = number;
    do {
        const mod = n % radix;
        n = (n - mod) / radix;
        arr.unshift(chars[mod]);
    } while (n);
    return arr.join('');
}

export const decode = (str: string, type: Type): number => {
    const chars = getChars(type);
    let input: string[] = [];
    if (type == Type.emoji) {
        input = emojistring2arr(str);
    } else {
        input = str.split('');
    }
    const radix: number = chars.length;
    const len = input.length;
    let i = 0;
    let origin_number = 0;
    while (i < len) {
        origin_number += Math.pow(radix, i++) * chars.indexOf(input[len - i]);
    }
    return origin_number;
}